<mat-card>
    <mat-card-header>
        <div mat-card-avatar (click)="fileInput.click()">
            <ng-container *ngIf="url(); else usericon">
                <img class="mat-card-image-custom" mat-card-image alt="profile-img" src={{url()}} />
            </ng-container>
            <ng-template #usericon>
                <mat-icon color="accent" class="commerce_icon">store_mall_directory</mat-icon>
            </ng-template>
            <input class="hidden" placeholder="selectFile" type="file" (change)="onFileChanged($event)" #fileInput>
        </div>
        <mat-card-title>{{project?.name??''}}</mat-card-title>
        <mat-card-subtitle matTooltip="{{project?.address??''}}"
            (click)="showAddressMap()">{{project?.address??''}}</mat-card-subtitle>

    </mat-card-header>
    <mat-card-content>
        <mat-divider></mat-divider>
        <!-- Tags -->
        <form>
            <mat-form-field class="mff">
                <mat-chip-grid #chipGrid aria-label="status project">
                    <ng-container *ngFor="let tag of tags_status()">
                        <mat-chip-row class="small-chip" [class]="tag.class" (removed)="remove(tag)">
                            {{tag.name}}
                            <button matChipRemove [attr.aria-label]="'remove ' + tag.name">
                                <mat-icon>cancel</mat-icon>
                            </button>
                        </mat-chip-row>
                    </ng-container>
                </mat-chip-grid>
                <input placeholder="{{'new_tag' | translate | titlecase}}" [matChipInputFor]="chipGrid"
                    [formControl]="fruitCtrl" />
                <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                    <mat-option *ngFor="let tag of tag_status_default()" [value]="tag">
                        {{tag}}
                    </mat-option>
                </mat-autocomplete>
            </mat-form-field>
        </form>
        <!-- <ngx-skeleton-loader count="1" appearance="circle"></ngx-skeleton-loader> -->

        <mat-vertical-stepper #stepper [linear]="false" [disableRipple]="true" animationDuration="1000">
            <ng-template matStepperIcon="edit"></ng-template>
            <ng-template matStepperIcon="number"></ng-template>
            <ng-template matStepperIcon="done"></ng-template>
            <mat-step>
                <ng-template matStepLabel>{{'project_status' | translate | titlecase}}</ng-template>
                <ng-template matStepContent>
                    <ngb-carousel [interval]="0">
                        <ng-template ngbSlide>
                            <div>
                                <!-- <img [src]="images[0]" alt="Random first slide" /> -->
                                <img mat-card-image
                                    src="https://estucosypinturas.com.co/wp-content/uploads/2018/02/IMG_4721.jpg"
                                    alt="Photo of a Shiba Inu">
                            </div>
                            <div class="carousel-caption">
                                <!-- <h3>First slide label</h3> -->
                                <!-- <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p> -->
                            </div>
                        </ng-template>
                        <ng-template ngbSlide>
                            <div>
                                <img mat-card-image
                                    src="https://estucosypinturas.com.co/wp-content/uploads/2015/09/WhatsApp-Image-2017-05-18-at-16.32.09-1.jpeg"
                                    alt="Photo of a Shiba Inu">
                            </div>
                            <div class="carousel-caption">
                                <!-- <h3>Second slide label</h3> -->
                            </div>
                        </ng-template>
                    </ngb-carousel>
                </ng-template>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>{{'project_data' | translate | titlecase}}</ng-template>
                <ng-template matStepContent>
                    <mat-accordion multi>
                        <ng-container *ngIf="options_card()">
                            <ng-container *ngFor="let option of options_card()">
                                <mat-expansion-panel hideToggle (afterExpand)="option_after_open(option)">
                                    <mat-expansion-panel-header>
                                        <mat-panel-description>
                                            {{option.label | translate | titlecase}}
                                            <mat-icon [matBadge]="option.badge ? option.badge: null"
                                                color="accent">{{option.icon}}</mat-icon>
                                        </mat-panel-description>
                                    </mat-expansion-panel-header>
                                    <!-- <ng-template matExpansionPanelContent>
                                        {{option.label | translate | titlecase}}
                                    </ng-template> -->
                                    <ng-container #project_option_componet></ng-container>
                                </mat-expansion-panel>
                            </ng-container>
                        </ng-container>
                    </mat-accordion>
                </ng-template>
            </mat-step>
        </mat-vertical-stepper>

        <mat-divider></mat-divider>
        <mat-chip-listbox aria-label="labour project">
            <ng-container *ngFor="let tag of tags_labour()">
                <mat-chip class="small-chip" [class]="tag.class">{{tag.name}}</mat-chip>
            </ng-container>
        </mat-chip-listbox>
    </mat-card-content>
    <mat-card-actions>
        <ng-container *ngFor="let option of options_main()">
            <ng-container *ngIf="option.name === 'photo'; else option_mini">
                <button mat-fab color="accent" matTooltip="{{option.label | translate | titlecase}}"
                    aria-label="assignment icon">
                    <mat-icon color="primary">{{option.icon}}</mat-icon>
                </button>
            </ng-container>
            <ng-template #option_mini>
                <button mat-mini-fab color="primary" matTooltip="{{option.label | translate | titlecase}}"
                    aria-label="assignment icon">
                    <mat-icon color="accent">{{option.icon}}</mat-icon>
                </button>
            </ng-template>
        </ng-container>
    </mat-card-actions>
</mat-card>